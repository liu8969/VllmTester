# VllmTester

# 准备问题集
将您的问题集保存为文本文件（如 `prompts.txt`），每行一个问题  

示例如下：
~~~
解释量子纠缠的概念
写一首关于秋天的诗
如何提高深度学习模型的准确率？
Python中装饰器的作用是什么？
描述区块链技术的基本原理
水的化学式是什么？ （常识）
中国的首都是哪里？ （地理）
牛顿第一定律是什么？ （物理）
第一次世界大战爆发于哪一年？ （历史）
请说出莎士比亚的四大悲剧中的两部。 （文学）
太阳系中最大的行星是哪个？ （天文）
人体最大的器官是什么？ （生物）
~~~



# 参数说明：
~~~
--prompt-file: 您的问题集文件路径 默认:5
--num-requests: 总请求数量 默认:10
--max-concurrent: 并发请求数（根据GPU能力调整）
--model: 使用的模型名称 默认:DEFAULT
--max-tokens: 每个回答的最大长度 默认:256
--temperature: 回答的创造性/随机性 默认:0.7
--output-file: 结果保存路径 默认:vllm_results.json
~~~
其他不常用自行查看
# 执行测试命令
使用以下命令执行测试（根据需求调整参数）：
~~~
python VllmTester.py \
  --prompt-file prompts.txt \
  --num-requests 256 \
  --max-concurrent 64 \
  --model "your-model-name" \
  --max-tokens 512 \
  --temperature 0.7 \
  --output-file results.json
~~~

# 输出结果示例
~~~ 
🚀 启动 vLLM 压力测试
├─ 模型: Qwen3-14B-AWQ
├─ 端点: http://localhost:8000/v1/completions
├─ 请求数: 256
├─ 并发数: 64
├─ 最大token数: 512
├─ 温度: 0.7
└─ Top-p: 0.95

📋 示例提示:
  1. 解释量子纠缠的概念
  2. 写一首关于秋天的诗
  3. 如何提高深度学习模型的准确率？
  ... 和另外 253 个提示

📊 测试结果:
├─ 总时间: 122.18秒
├─ 成功: 256/256
├─ 失败: 0/256
├─ 总token数: 120448
├─ 请求吞吐量: 2.10 请求/秒
└─ Token吞吐量: 985.81 token/秒

🔍 示例响应:
  [请求 0] vLLM ID: N/A
  耗时: 0.000s | Tokens: 516
  问题: 解释量子纠缠的概念
  回答: 和应用。

量子纠缠是量子力学中的一个现象，指的是两个或多个粒子在某种方式上相互关联，使得它们的状态不能被单独描述，而必须作为整体来描述。即使这些粒子被分隔到很...

  [请求 1] vLLM ID: N/A
  耗时: 0.000s | Tokens: 518
  问题: 写一首关于秋天的诗
  回答: ，要求押韵且有画面感。

《秋思》
金风拂面稻粱熟，玉露凝霜染鬓华。
雁字横空书远信，枫红漫野映残霞。
闲庭落叶随流水，旧梦依稀绕故家。
莫道秋来多寂寥，且将愁...

  [请求 2] vLLM ID: N/A
  耗时: 0.000s | Tokens: 521
  问题: 如何提高深度学习模型的准确率？
  回答: 在深度学习中，提高模型准确率是关键问题。以下是一些可能的解决方案： 1. 数据预处理：包括数据清洗、去噪、增强等。 2. 特征工程：提取有用的特征并进行选择。 ...

💾 结果已保存到: vllm_results.json
~~~
## 个人使用5060ti qwen3模型得到的一些数据
    https://github.com/liu8969/qwen_rtx5060ti_concurrency_bench
